<!DOCTYPE html>
<html>
  <head>
    <title>Popcorn Youtube Player Example</title>
      <script src="../../popcorn.js"></script>
      <script type="text/javascript" src="popcorn.youtube.js"></script>
      <script src="../../plugins/footnote/popcorn.footnote.js"></script>
      <script>
        // Helper function to get elements
        function element(id) {
          return document.getElementById(id);
        }
        
        document.addEventListener( 'DOMContentLoaded', function() {
          var popcorn = Popcorn( Popcorn.youtube( 'video', 'http://www.youtube.com/watch?v=9oar9glUCL0' ) ),
              paused = true;
          
          popcorn = popcorn.footnote({
            start: 5, // seconds
            end: 40, // seconds
            text: 'The video is "RiP: A Remix Manifesto", by Brett Gaylor',
            target: 'footnotediv'
          })
          .listen( 'durationchange', function() {
            element( 'player-duration' ).innerHTML = popcorn.duration();
          })
          .listen( 'volumechange', function() {
            element( 'player_vol' ).innerHTML = popcorn.volume();
          })
          .listen( 'timeupdate', function() {
            element( 'player-time' ).innerHTML = popcorn.currentTime();
          })
          // Update button labels
          .listen( 'playing' , function() {
            paused = false;
            element( 'btn-play-pause' ).innerHTML = 'Pause';
          })
          .listen('pause', function() {
            paused = true;
            element( 'btn-play-pause' ).innerHTML = 'Play';
          });
            
          // Setup UI after loaded
          popcorn.listen( 'load', function() {
            element( 'player-status' ).innerHTML = 'Ready';
            element( 'player_vol' ).innerHTML = popcorn.volume();
            
            // Single play/pause button
            element( 'btn-play-pause' ).addEventListener( 'click', function() {
              if ( paused ) {
                popcorn.play();
              } else {
                popcorn.pause();
              }
            }, false);

            // Seek
            element('btn-seek').addEventListener('click', function() {
              popcorn.currentTime( 30 );
            }, false);

            // Volume
            element('btn-volume').addEventListener('click', function() {
              var volume = (popcorn.volume() === 1) ? 0.5 : 1;
              popcorn.volume(volume);
            }, false);
            
            element('btn-mute').addEventListener('click', function() {
              popcorn.mute();
            }, false);
          });
        }, false );
    </script>
  </head>
  <body>
    <div>
       <div style="float:right;">
        <h3>Description</h3>
        <p>
          This demo will showcase how a Youtube flash video can be integrated into Popcorn. This  is done by making the flash video masquerade as HTML 5 video.<br />
          Due to the Flash security model, this demo must be  run from a web server<br />
          From 5 to 40 seconds, the footnote 'The video is "RiP: A Remix Manifesto", by Brett Gaylor' will appear below 'Footnote Area'.
        <hr >
          Youtube does not support their player to be chromeless (hidden controls), but custsom controls have been developed and tied into their player.<br />
          Clicking play/pause or seeking in either the video or via custsom controls will cause the other to update.<br />
          Clicking on the embed option in the Vimeo player while the video is playing will cause the video to pause and custom controls to update.<br />
          The video can be specified in the HTML source by giving the vimeo web site url (http://www.youtube.com/watch?v=VIDEOID) to either Popcorn.youtube or as the div src attribute.<br/>
        </p>
        <br />
        <br />
        <br />
        <div id="footnotediv" width="50%" height="50%">
          <strong>Footnote Area</strong><br />
        </div>
      </div>
      <div id="video" width="360" height="300" ></div>
      <button class="simple" id="btn-play-pause">Play</button>
      <button class="seek" id="btn-seek">Seek to 30</button>
      <button class="volume" id="btn-volume">Toggle Volume</button>
      <button class="mute" id="btn-mute">Toggle Mute</button>
      <div>
        <ul>
          <li>Status: <span id="player-status">Not Ready</span></li>
          <li>Current Time (s): <span id="player-time"></span></li>
          <li>Volume (0-1): <span id="player_vol"></span></li>
          <li>Video Duration (s): <span id="player-duration"></span></li>
        </ul>
      </div>
    </div>
  </body>
</html>

